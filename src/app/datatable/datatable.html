<div class="container">
  <div class="header-title">
    <div class="icon-wrapper">
      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="3" y1="9" x2="21" y2="9"></line>
        <line x1="9" y1="21" x2="9" y2="9"></line>
      </svg>
    </div>
    <h1>ตารางข้อมูลผู้มาติดต่อ</h1>
  </div>

  <div class="content-box">
    
      <div class="custom-date-container">
          
          <div class="date-pill" (click)="picker.open()">
              <span class="date-text">
                  {{ startDate ? (startDate | date:'dd/MM/yyyy') : 'วันที่เริ่มต้น' }}
              </span>
              <mat-icon class="dropdown-icon">arrow_drop_down</mat-icon>
          </div>

          <div class="date-pill" (click)="picker.open()">
              <span class="date-text">
                  {{ endDate ? (endDate | date:'dd/MM/yyyy') : 'วันที่สิ้นสุด' }}
              </span>
              <mat-icon class="dropdown-icon">arrow_drop_down</mat-icon>
          </div>

      </div>

      <mat-form-field class="hidden-picker">
          <mat-date-range-input [rangePicker]="picker">
              <input matStartDate [(ngModel)]="startDate">
              <input matEndDate [(ngModel)]="endDate">
          </mat-date-range-input>
          <mat-date-range-picker #picker></mat-date-range-picker>
      </mat-form-field>

    <div class="table-responsive">
      <table>
        <thead>
          <tr>
            <th class="col-id">ผู้มาติดต่อ<br>ลำดับที่</th>
            <th class="col-name">ชื่อ<br>นามสกุล</th>
            <th class="col-date">วัน/<br>เดือน/ปี</th>
            <th class="col-time">เวลา<br>เข้า</th>
            <th class="col-time">เวลา<br>ออก</th>
            <th class="col-dept">ส่วนงานที่ติดต่อ/<br>ชื่อบุคลากร</th>
            <th class="col-img">รูปบัตรประชาชน/<br>รูปทะเบียนรถ</th>
            <th class="col-status">เสร็จสิ้น<br>การติดต่อ</th>
          </tr>
        </thead>
        <tbody>
          @for (item of visitors(); track item.id) {
            <tr>
              <td class="text-center font-bold text-blue">{{ item.id }}</td>
              <td class="text-center text-blue">{{ item.name }}</td>
              <td class="text-center text-blue">{{ item.date }}</td>
              <td class="text-center text-blue">{{ item.timeIn }}</td>
              <td class="text-center text-blue">{{ item.timeOut }}</td>
              <td class="text-left text-blue pl-4">{{ item.department }}</td>
              <td class="text-center">
                <button class="link-btn" (click)="viewImage(item.id)">รูป</button>
              </td>
              <td class="text-center text-blue">{{ item.status }}</td>
            </tr>
          }
        </tbody>
      </table>
    </div>

    <div class="footer-action">
      <button class="btn-add" routerLink="/register">เพิ่มผู้มาติดต่อ</button>
    </div>

  </div>
</div>